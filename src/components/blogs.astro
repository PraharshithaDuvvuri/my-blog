---
import { type Frontmatter } from "../layouts/blog-layout.astro";
import Blog, { type BlogType } from "./blog.astro";

const rawBlogs = await Astro.glob("../pages/blog/*.md");
const blogs: BlogType[] = rawBlogs.map(
  (it: { frontmatter: Frontmatter; url: string }) => ({
    ...it.frontmatter,
    url: it.url,
  })
);
blogs.sort((a, b) => b.published - a.published);
---

<div class="flex flex-col gap-[1.125rem]">
  {blogs.map((frontmatter) => <Blog {...frontmatter} />)}
</div>
