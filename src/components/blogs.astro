---
import { convertDate } from "../lib/util.astro";
import Blog, { type BlogType } from "./blog.astro";

const rawBlogs = await Astro.glob("../pages/blog/*.md");
const blogs: BlogType[] = rawBlogs.map((it: any) => ({
  ...it.frontmatter,
  url: it.url,
}));

blogs.sort(
  (a, b) =>
    convertDate(b.published).getTime() - convertDate(a.published).getTime()
);
---

<div class="flex flex-col gap-[1.125rem]">
  {
    blogs.map((frontmatter) => (
      <Blog
        title={frontmatter.title}
        description={frontmatter.description}
        published={frontmatter.published}
        url={frontmatter.url}
      />
    ))
  }
</div>
